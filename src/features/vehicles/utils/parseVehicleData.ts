/* Sample JSON data:
{
    "make": {
        "id": 200005922,
        "name": "Lamborghini",
        "niceName": "lamborghini"
    },
    "model": {
        "id": "Lamborghini_Urus",
        "name": "Urus",
        "niceName": "urus"
    },
    "engine": {
        "id": "401784261",
        "name": "Gas",
        "equipmentType": "ENGINE",
        "availability": "STANDARD",
        "compressionRatio": 9.7,
        "cylinder": 8,
        "size": 4,
        "displacement": 3996,
        "configuration": "V",
        "fuelType": "premium unleaded (required)",
        "horsepower": 641,
        "torque": 627,
        "totalValves": 32,
        "type": "gas",
        "code": "8VTTG4.0",
        "compressorType": "twin turbocharger",
        "rpm": {
            "horsepower": 6000,
            "torque": 2250
        },
        "valve": {
            "timing": "variable valve timing",
            "gear": "double overhead camshaft"
        }
    },
    "transmission": {
        "id": "401785262",
        "name": "8A",
        "equipmentType": "TRANSMISSION",
        "availability": "STANDARD",
        "automaticType": "Shiftable automatic",
        "transmissionType": "AUTOMATIC",
        "numberOfSpeeds": "8"
    },
    "drivenWheels": "all wheel drive",
    "numOfDoors": "4",
    "options": [
        {
            "category": "Interior",
            "options": [
                {
                    "id": "401785433",
                    "name": "Floor Mats W/Leather Piping And Double Stitching",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785453",
                    "name": "Rear Center Console In Carbon",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785436",
                    "name": "Multifunctional Steering Wheel W/Suede Leather Inserts Heated",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785443",
                    "name": "4 Seat Configuration W/Full Electric Front Seats",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "4-seat configuration; Rear bucket seats with 8-way power adjustment and heating function"
                },
                {
                    "id": "401785434",
                    "name": "Multifunctional Steering Wheel In Smooth Leather Heated",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785463",
                    "name": "Night Vision",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785441",
                    "name": "Contrast Stitching On Steering Wheel",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785442",
                    "name": "Full Electric Front Seats W/Ventilation And Massage",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "18-way power adjustable front seats with power lumbar, heating, ventilation and massage functions; Electric steering wheel column"
                },
                {
                    "id": "401785449",
                    "name": "Colored Seat Belt In Terra Asia",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785457",
                    "name": "Head Up Display (HUD)",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785435",
                    "name": "Multifunctional Steering Wheel W/Suede Leather Inserts",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785456",
                    "name": "Bang & Olufsen Advanced 3D Audio System",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785432",
                    "name": "Optional Stitching",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Contrast or inverted stitching"
                },
                {
                    "id": "401785429",
                    "name": "Bicolor Sportivo Alcantara",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Two-tone Alcantara interior"
                },
                {
                    "id": "401785454",
                    "name": "Insert In Wood-Open Pore",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785426",
                    "name": "Unicolor Sportivo Alcantara",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Single-tone Alcantara interior"
                },
                {
                    "id": "401785438",
                    "name": "Multifunctional Steering Wheel W/Perforated Leather Inserts Heated",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785448",
                    "name": "Colored Seat Belt In Rosso Rea",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785447",
                    "name": "Colored Seat Belt In Bianco Polar",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785427",
                    "name": "Bicolor Elegante Leather",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Two-tone leather interior"
                },
                {
                    "id": "401785440",
                    "name": "Multifunctional Steering Wheel In Colored Leather Heated",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785430",
                    "name": "Q-citura W/Alcantara",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Adds diamond pattern stitching on inner seat portions"
                },
                {
                    "id": "401785439",
                    "name": "Multifunctional Steering Wheel In Colored Leather",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785445",
                    "name": "Rear Seat Entertainment",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Two rear touch screen monitors with wireless audio/video streaming"
                },
                {
                    "id": "401785450",
                    "name": "Colored Seat Belt In Terra Efire",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785428",
                    "name": "Bicolor Sportivo Leather",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Two-tone leather interior"
                },
                {
                    "id": "401785444",
                    "name": "Rear Seat Heating",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785468",
                    "name": "Cargo Management System",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785437",
                    "name": "Multifunctional Steering Wheel W/Perforated Leather Inserts",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785431",
                    "name": "Q-citura W/Leather",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Adds diamond pattern stitching on inner seat portions"
                },
                {
                    "id": "401785455",
                    "name": "Insert In Wood-Open Pore W/Aluminum Insert",
                    "equipmentType": "OPTION",
                    "availability": "All"
                }
            ]
        },
        {
            "category": "Exterior",
            "options": [
                {
                    "id": "401785411",
                    "name": "Green Painted Brake Calipers",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785284",
                    "name": "Rims Alcione 21\" Titanium Matt",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785423",
                    "name": "Black Matt Exhaust Tailpipes",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785289",
                    "name": "Rims Nath 22\" Diamond Finished",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785285",
                    "name": "Rims Asterope 21\" Silver",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785414",
                    "name": "Electric Panorama Roof",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785467",
                    "name": "Tailgate Handless Opener",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785283",
                    "name": "Rims Alcione 21\" Shiny Black",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785408",
                    "name": "Yellow Painted Brake Calipers",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785415",
                    "name": "Black Roof Rails",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785412",
                    "name": "22\" Pirelli PO Corsa Tire",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785282",
                    "name": "Black Painted Brake Caliper",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785409",
                    "name": "Orange Painted Brake Calipers",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785465",
                    "name": "Heat Reflective Windscreen",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785424",
                    "name": "Bright Chrome Exhaust Tailpipes",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785290",
                    "name": "Rims Taigete 23\" Shiny Black",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785466",
                    "name": "Heat Reflective Windscreen W/Heating And Defrosting",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785425",
                    "name": "Manual Trailer Towing",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Manual trailer hitch without tow ball"
                },
                {
                    "id": "401785410",
                    "name": "Red Painted Brake Calipers",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785288",
                    "name": "Rims Nath 22\" Titanium Matt",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785413",
                    "name": "21\" Spare Wheel",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785287",
                    "name": "Rims Nath 22\" Silver",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785418",
                    "name": "Side Double Glaze And Heat Absorption Glass",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "All glass except third quarter glass"
                },
                {
                    "id": "401785416",
                    "name": "Chrome Roof Rails",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785286",
                    "name": "Rims Asterope 21\" Graphite Gray",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785417",
                    "name": "Privacy Acoustic Double Glaze Glass",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Acoustic front side glass; Privacy double glazing on rear glass and rear window"
                },
                {
                    "id": "401785464",
                    "name": "Wet-Arm Wiper W/Headlight Washer And RVC Cleaner",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785291",
                    "name": "Rims Taigete 23\" Diamond Finished",
                    "equipmentType": "OPTION",
                    "availability": "All"
                }
            ]
        },
        {
            "category": "Mechanical",
            "options": [
                {
                    "id": "401785422",
                    "name": "Offroad Modes W/Trailer Towing Preparation",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Steel skid plate with higher ramp angle on front and rear bumpers; Underfloor protection and reinforcement; Brushed steel exhaust pipes; Two additional driving modes for off-road conditions (TERRA, SABBIA)"
                },
                {
                    "id": "401785489",
                    "name": "Fuel Tank 85 Liters",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Higher capacity 22.5 gallon fuel tank"
                }
            ]
        },
        {
            "category": "Additional Fees",
            "options": [
                {
                    "id": "401785472",
                    "name": "Maintenance Package 5 Years",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785469",
                    "name": "Extension Of Warranty 4 Years",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785471",
                    "name": "Maintenance Package 3 Years",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785470",
                    "name": "Extension Of Warranty 5 Years",
                    "equipmentType": "OPTION",
                    "availability": "All"
                }
            ]
        },
        {
            "category": "Package",
            "options": [
                {
                    "id": "401785452",
                    "name": "Big Interior Carbon Package Front",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785420",
                    "name": "Body Color Style Package",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "All exterior black matt parts in body color"
                },
                {
                    "id": "401785419",
                    "name": "High Gloss Black Style Package",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Black Matt exterior trim; High-gloss black painted grilles"
                },
                {
                    "id": "401785462",
                    "name": "Full ADAS Package W/Head Up Display",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Advanced Driver Assistance Systems (ADAS)"
                },
                {
                    "id": "401785446",
                    "name": "Branding Pack",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Embroidered"
                },
                {
                    "id": "401785458",
                    "name": "Ambient Light Package",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785421",
                    "name": "Chrome Package",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Chrome window covers"
                },
                {
                    "id": "401785451",
                    "name": "Small Interior Carbon Package Front",
                    "equipmentType": "OPTION",
                    "availability": "All"
                }
            ]
        },
        {
            "category": "Safety",
            "options": [
                {
                    "id": "401785459",
                    "name": "Highway Assistant Package",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785461",
                    "name": "Top View Camera",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "401785460",
                    "name": "Urban Road Assistant Package",
                    "equipmentType": "OPTION",
                    "availability": "All"
                }
            ]
        }
    ],
    "colors": [
        {
            "category": "Interior",
            "options": [
                {
                    "id": "401785575",
                    "name": "Nero Ade/Arancio Leonis Sportivo Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785578",
                    "name": "Nero Ade/Rosso Alala Sportivo Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401786233",
                    "name": "Nero Ade/Verde Faunus Sportivo Alcantara",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785582",
                    "name": "Terra Asia Vintage Elegante Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785576",
                    "name": "Nero Ade/Bianco Leda Sportivo Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785584",
                    "name": "Blu Teia Vintage Elegante Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785583",
                    "name": "Terra Efire Vintage Elegante Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785573",
                    "name": "Grogio Octans Unicolor Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401786231",
                    "name": "Nero Ade/Giallo Taurus Sportivo Alcantara",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401786230",
                    "name": "Nero Ade/Arancio Leonis Sportivo Alcantara",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785586",
                    "name": "Grigio Octans Unicolor Alcantara",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785580",
                    "name": "Bianco Polar Elegante Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785574",
                    "name": "Nero Ade/Giallo Taurus Sportivo Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785577",
                    "name": "Nero Ade/Blu Amon Sportivo Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401786232",
                    "name": "Nero Ade/Bianco Leda Sportivo Alcantara",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401786234",
                    "name": "Nero Ade/Rosso Alala Sportivo Alcantara",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785579",
                    "name": "Nero Ade/Verde Faunus Sportivo Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785571",
                    "name": "Nero Ade Unicolor Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785572",
                    "name": "Marrone Elpis Unicolor Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785585",
                    "name": "Nero Ade Unicolor Alcantara",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785581",
                    "name": "Rosso Rea Elegante Leather",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                }
            ]
        },
        {
            "category": "Exterior",
            "options": [
                {
                    "id": "401785278",
                    "name": "Rosso Anteros Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785276",
                    "name": "Blu Eleos Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785273",
                    "name": "Bianco Icarus Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785267",
                    "name": "Nero Helene Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785266",
                    "name": "Nero Noctis",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785274",
                    "name": "Giallo Auge",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785271",
                    "name": "Rosso Mars Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785269",
                    "name": "Grigio Nimbus Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785272",
                    "name": "Marrone Alcestis Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785268",
                    "name": "Bianco Monocerus",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785275",
                    "name": "Blu Astraeus Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785277",
                    "name": "Verde Hebe Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "401785270",
                    "name": "Grigio Lynx Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                }
            ]
        }
    ],
    "price": {
        "baseMsrp": 200000,
        "deliveryCharges": 3995,
        "estimateTmv": false
    },
    "categories": {
        "primaryBodyType": "SUV",
        "market": "High-Performance,Crossover,Exotic",
        "crossover": "Car",
        "epaClass": "Standard Sport Utility Vehicles",
        "vehicleSize": "Large",
        "vehicleType": "SUV",
        "vehicleStyle": "4dr SUV"
    },
    "squishVin": "ZPBUA1ZLKL",
    "years": [
        {
            "id": 401784259,
            "year": 2019,
            "styles": [
                {
                    "id": 401784260,
                    "name": "4dr SUV AWD (4.0L 8cyl Turbo 8A)",
                    "submodel": {
                        "body": "SUV",
                        "modelName": "Urus SUV",
                        "niceName": "suv"
                    },
                    "trim": "Base"
                }
            ]
        }
    ],
    "matchingType": "SQUISHVIN",
    "mpg": {
        "highway": "17",
        "city": "12"
    }
}
 */

/* 
{
    "make": {
        "id": 200000404,
        "name": "Chevrolet",
        "niceName": "chevrolet"
    },
    "model": {
        "id": "Chevrolet_Silverado_1500",
        "name": "Silverado 1500",
        "niceName": "silverado-1500"
    },
    "engine": {
        "name": "Engine",
        "equipmentType": "ENGINE",
        "availability": "STANDARD",
        "cylinder": 8,
        "configuration": "V",
        "fuelType": "regular unleaded",
        "totalValves": 16,
        "type": "gas",
        "compressorType": "NA",
        "valve": {
            "gear": "overhead valve"
        }
    },
    "transmission": {
        "name": "4A",
        "equipmentType": "TRANSMISSION",
        "availability": "STANDARD",
        "transmissionType": "AUTOMATIC",
        "numberOfSpeeds": "4"
    },
    "drivenWheels": "rear wheel drive",
    "numOfDoors": "4",
    "options": [
        {
            "category": "Other",
            "options": [
                {
                    "id": "200020542",
                    "name": "Black Granite Metallic Paint",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "200020527",
                    "name": "P265/65R18 On/Off-Road White Outline Letter Tires",
                    "equipmentType": "OPTION",
                    "availability": "LT/LTZ",
                    "description": "Includes P265/65R18 on/off-Road white outline letter tires and 17\" all-season spare tire."
                },
                {
                    "id": "200020455",
                    "name": "Power Pack Plus",
                    "equipmentType": "OPTION",
                    "availability": "LT Ext",
                    "description": "Includes Vortec 5.3L SFI V8 engine with Active Fuel Management (displacement on demand), iron block, 315 hp @ 5200 rpm and 338 lb-ft of torque @ 4400 rpm, Flex-Fuel capable of running on unleaded or up to 85% ethanol, heavy-duty automatic locking rear differential, auxiliary external transmission oil cooler, trailer hitch platform with 2\" receiver, 7-wire harness for park lamps, backup lamps, right turn, left turn, electric brake lead, battery and ground, independent fused trailering circuits attached to 7-way sealed connector, wiring harness for after-market trailer brake controller, single wire for center high-mounted stop lamp and 17\" x 7.5\" custom aluminum wheels."
                },
                {
                    "id": "200020361",
                    "name": "Emissions Override",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "For Vehicles ordered by dealers in Federal emission states with California, Connecticut, Maine, Massachusetts, New York, Pennsylvania, Rhode Island or Vermont emissions.  May also be used by dealers in states of California, Connecticut, Maine, Massachusetts, New York, Pennsylvania, Rhode Island or Vermont to order different state-specific emissions."
                },
                {
                    "id": "200020475",
                    "name": "P265/65R18 On/Off-Road Blackwall Tires",
                    "equipmentType": "OPTION",
                    "availability": "LT/LTZ",
                    "description": "Includes P265/65R18 on/off-Road blackwall tires and 17\" all-season spare tire."
                },
                {
                    "id": "200020362",
                    "name": "Northeast Emissions Requirements",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Includes emissions controls for vehicles sold in Connecticut, Maine, Massachusetts, New Jersey, New York, Oregon, Pennsylvania, Rhode Island, Vermont and Washington."
                },
                {
                    "id": "200020370",
                    "name": "Bluetooth Package (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "LT/XFE",
                    "description": "Includes Bluetooth personal cell phone connectivity to vehicle audio system and steering wheel mounted audio controls."
                },
                {
                    "id": "200020403",
                    "name": "Back-Up Alarm (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "All exc Crew",
                    "description": "Includes 97 decibel backup alarm."
                },
                {
                    "id": "200020349",
                    "name": "LT Equipment Group",
                    "equipmentType": "OPTION",
                    "availability": "LT",
                    "description": "Includes vehicle with standard equipment."
                },
                {
                    "id": "200020523",
                    "name": "Exterior Plus Package",
                    "equipmentType": "OPTION",
                    "availability": "LT/XFE Ext and Crew",
                    "description": "Includes remote vehicle starter system, universal home remote, EZ-Lift locking tailgate, front fog lamps, auto-dimming interior rearview mirror, power folding power adjustable heated mirrors with integrated turn signal indicators and driver-side auto-dimming."
                },
                {
                    "id": "200020406",
                    "name": "Power Supply 12 Volt (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "WT/LT exc Crew",
                    "description": "Includes a 12 volt direct power supply from the battery with two separate 30 amp fused circuits. Each circuit has a 30 amp mini-fuse for both positive and ground to protect electrical accessories. Main supply lead has a 60 amp maxi-fuse. All fuses are serviceable. Provides either direct battery power or operation through the ignition system. Hook-up wire is located at the front of the floor console. Operational amperage is 21 amps each circuit, 42 amps total. Hook-up and operational instructions are provided."
                },
                {
                    "id": "200020494",
                    "name": "Heavy-Duty Cooling Package",
                    "equipmentType": "OPTION",
                    "availability": "WT Crew, LT, LTZ exc Crew",
                    "description": "Includes external engine oil cooler, auxiliary external transmission oil cooler, electric fan and heavy-duty radiator."
                },
                {
                    "id": "200020356",
                    "name": "Pickup Box Decal Delete (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "All exc Crew"
                },
                {
                    "id": "200020372",
                    "name": "Locking Tailgate (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "LT",
                    "description": "Includes locking tailgate with EZ lift."
                },
                {
                    "id": "200020371",
                    "name": "Fog Lamps (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "LT"
                },
                {
                    "id": "200020536",
                    "name": "AM/FM Radio W/6-Disc In-Dash CD Changer",
                    "equipmentType": "OPTION",
                    "availability": "LT/LTZ/XFE",
                    "description": "Includes AM/FM radio with 6-disc in-dash CD changer, MP3 playback, seek-and-scan, digital clock, auto-tone control, Radio Data System (RDS), auxiliary input jack and TheftLock."
                },
                {
                    "id": "200020533",
                    "name": "OnStar Delete (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "WT/LS/LT/XFE"
                },
                {
                    "id": "200020492",
                    "name": "Trailering Equipment Package",
                    "equipmentType": "OPTION",
                    "availability": "LT",
                    "description": "Includes heavy-duty automatic locking rear differential, auxiliary external transmission oil cooler, trailer hitch platform with 2\" receiver, 7-wire harness for park lamps, backup lamps, right turn, left turn, electric brake lead, battery and ground, independent fused trailering circuits attached to 7-way sealed connector, wiring harness for after-market trailer brake controller, single wire for center high-mounted stop lamp."
                },
                {
                    "id": "200020546",
                    "name": "Safety Package",
                    "equipmentType": "OPTION",
                    "availability": "LT Ext/Crew and XFE",
                    "description": "Includes power adjustable pedals, front and rear head curtain side-impact airbags with roll over sensor, ultrasonic rear parking assist and rear window defogger."
                },
                {
                    "id": "200020530",
                    "name": "Cab Roof-Mounted Lamp Provision",
                    "equipmentType": "OPTION",
                    "availability": "WT/LT/LS Reg and Ext",
                    "description": "Includes an instrument panel-mounted switch and electrical wiring tucked beneath the headliner for a body upfitter to connect a body-mounted warning or emergency lamp. 30-amp nominal rating."
                },
                {
                    "id": "200020354",
                    "name": "Speed Governor (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "All exc Crew",
                    "description": "Includes electronic software to facilitate 70-MPH maximum road speed."
                },
                {
                    "id": "200020515",
                    "name": "Front Bucket Seats W/Leather",
                    "equipmentType": "OPTION",
                    "availability": "LT/XFE exc Reg",
                    "description": "Includes leather bucket seats, 6-way power driver and front passenger adjusters, manual lumbar support, floor console, adjustable outboard head restraints and seatback storage pockets. "
                },
                {
                    "id": "200020359",
                    "name": "Federal Emissions",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Includes emissions controls for vehicles sold nationwide."
                },
                {
                    "id": "200020364",
                    "name": "California Emissions Requirements",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Includes emissions controls for vehicles sold in California."
                },
                {
                    "id": "200020360",
                    "name": "Emissions Override",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Includes emissions controls for vehicles sold in California, Connecticut, Massachusetts, New Jersey, New York, Oregon, Pennsylvania, Rhode Island or Washington. For vehicles ordered by dealers in states of California, Connecticut, Massachusetts, New Jersey, New York, Oregon, Pennsylvania, Rhode Island or Washington with Federal emissions."
                },
                {
                    "id": "200020517",
                    "name": "Leather Split Bench Seat",
                    "equipmentType": "OPTION",
                    "availability": "LT/XFE Ext and Crew",
                    "description": "Includes leather front seat trim and 6-way power driver seat."
                },
                {
                    "id": "200020420",
                    "name": "Integrated Trailer Brake Controller",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "200020413",
                    "name": "Vinyl Floor Covering",
                    "equipmentType": "OPTION",
                    "availability": "LS/LT/XFE"
                },
                {
                    "id": "200020442",
                    "name": "17\" Custom Aluminum Wheels",
                    "equipmentType": "OPTION",
                    "availability": "LT"
                },
                {
                    "id": "200020418",
                    "name": "3.73 Rear Axle Ratio",
                    "equipmentType": "OPTION",
                    "availability": "All exc 4WD WT Reg, 4WD WT/LT Ext 8, 4WD LTZ Ext"
                },
                {
                    "id": "200020518",
                    "name": "Camper-Style Manual Extending Power Exterior Mirrors",
                    "equipmentType": "OPTION",
                    "availability": "LT/LTZ/XFE",
                    "description": "Includes manual extending, camper-style, heated, power exterior mirrors with turn signal indicators and lower convex spotter glass."
                },
                {
                    "id": "200020545",
                    "name": "Interior Plus Package",
                    "equipmentType": "OPTION",
                    "availability": "LT Ext/Crew and XFE",
                    "description": "Includes dual-zone automatic climate control, 6-way power driver seat adjuster, steering wheel mounted audio controls and Bluetooth personal cell phone connectivity to vehicle audio system."
                },
                {
                    "id": "200020421",
                    "name": "Engine Block Heater",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "200020516",
                    "name": "6-Way Power Driver Seat Adjuster",
                    "equipmentType": "OPTION",
                    "availability": "LT/XFE"
                },
                {
                    "id": "200020404",
                    "name": "Jack And Tools Delete (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "All exc Crew"
                },
                {
                    "id": "200020488",
                    "name": "Bose Premium Speaker System",
                    "equipmentType": "OPTION",
                    "availability": "LT Ext",
                    "description": "Includes Bose premium speaker system with sub-woofer in center console."
                },
                {
                    "id": "200020365",
                    "name": "Emissions Override",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Allows a California dealer (YF5 emissions) to order (NE1) emissions with (NB9) emissions override code for registration in (NE1) states; or, a Connecticut, Maine, Massachusetts, New Jersey, New York, Oregon, Pennsylvania, Rhode Island, Vermont and Washington dealer (NE1 emissions) to order (YF5) emissions with (NB9) emissions override code for registration in California."
                },
                {
                    "id": "200020471",
                    "name": "P265/70R17 On/Off-Road Blackwall Tires",
                    "equipmentType": "OPTION",
                    "availability": "LT/LTZ and WT 4WD",
                    "description": "Includes P265/70R17 on/off-Road blackwall tires and blackwall spare tire."
                },
                {
                    "id": "200020529",
                    "name": "Cargo Management System",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Includes aluminum front and side C-channel rails located in the pickup box and 4 adjustable tie-down hooks."
                },
                {
                    "id": "200020566",
                    "name": "XM Satellite Radio Delete (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "WT/LS/LT/XFE"
                },
                {
                    "id": "200020482",
                    "name": "Navigation Radio W/CD Player",
                    "equipmentType": "OPTION",
                    "availability": "LT Ext",
                    "description": "Includes AM/FM stereo with MP3 compatible CD player, seek and scan, digital clock, auto-tone control, Radio Data System (RDS), digital audio input, speed-compensated volume, TheftLock, XM satellite radio with NavTraffic, DVD- based navigation with voice recognition and Bose premium speaker system with sub-woofer in center console."
                },
                {
                    "id": "200020547",
                    "name": "Front Bucket Seats W/Premium Cloth",
                    "equipmentType": "OPTION",
                    "availability": "LT/XFE exc Reg",
                    "description": "Includes premium cloth bucket seats, 6-way power driver and front passenger adjusters, manual lumbar support, floor console, adjustable outboard head restraints and seatback storage pockets. "
                },
                {
                    "id": "200020552",
                    "name": "Power Sunroof",
                    "equipmentType": "OPTION",
                    "availability": "LT/LTZ/XFE Ext and Crew",
                    "description": "Includes tilt-sliding power sunroof with express-open and universal home remote."
                },
                {
                    "id": "200020481",
                    "name": "Solid Paint (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "WT/LT exc Crew"
                },
                {
                    "id": "200020444",
                    "name": "18\" Aluminum Wheels",
                    "equipmentType": "OPTION",
                    "availability": "LT/LTZ"
                },
                {
                    "id": "200020400",
                    "name": "Single 730 CCA Battery (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "All exc Crew"
                },
                {
                    "id": "200020405",
                    "name": "Spare Tire Delete (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "All exc Crew",
                    "description": "Deletes the spare tire only.  Spare wheel and carrier remain."
                },
                {
                    "id": "200020399",
                    "name": "Spare Wheel And Carrier Delete (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "All exc Crew",
                    "description": "Deletes the base spare wheel and carrier.  Does not delete jack or tools."
                },
                {
                    "id": "200020363",
                    "name": "Front License Plate Bracket",
                    "equipmentType": "OPTION",
                    "availability": "All",
                    "description": "Included for required states."
                },
                {
                    "id": "200020414",
                    "name": "Rear Window Defogger",
                    "equipmentType": "OPTION",
                    "availability": "WT/LS/LT"
                },
                {
                    "id": "200020514",
                    "name": "Power Sliding Rear Window",
                    "equipmentType": "OPTION",
                    "availability": "LT/LTZ/XFE Ext and Crew"
                },
                {
                    "id": "200020543",
                    "name": "Auto-Dimming Inside Rearview Mirror",
                    "equipmentType": "OPTION",
                    "availability": "LT/XFE"
                },
                {
                    "id": "200020569",
                    "name": "Off Road Package",
                    "equipmentType": "OPTION",
                    "availability": "LT/LTZ",
                    "description": "Includes 1.81\" shocks, off-road jounce bumpers, 34mm front stabilizer bar, high capacity air cleaner, skid plates and Z71 decals on rear quarters."
                },
                {
                    "id": "200020366",
                    "name": "Power Pack Plus Discount Not Desired",
                    "equipmentType": "OPTION",
                    "availability": "LT",
                    "description": "Required when content within the package is ordered and the entire package is not desired."
                },
                {
                    "id": "200020417",
                    "name": "Locking Rear Differential",
                    "equipmentType": "OPTION",
                    "availability": "WT/LS/LT"
                },
                {
                    "id": "200020353",
                    "name": "Fasten Seat Belt Label (Fleet)",
                    "equipmentType": "OPTION",
                    "availability": "All"
                },
                {
                    "id": "200020469",
                    "name": "P265/70R17 On/Off-Road White Outline Letter Tires",
                    "equipmentType": "OPTION",
                    "availability": "LT",
                    "description": "Includes P265/70R17 on/off-road white outline letter tires and blackwall spare tire."
                }
            ]
        }
    ],
    "colors": [
        {
            "category": "Interior",
            "options": [
                {
                    "id": "200020325",
                    "name": "Ebony",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020328",
                    "name": "Light Cashmere/Ebony",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020339",
                    "name": "Light Titanium/Ebony",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020326",
                    "name": "Ebony",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020329",
                    "name": "Light Cashmere/Ebony",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020338",
                    "name": "Light Titanium/Ebony",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                }
            ]
        },
        {
            "category": "Exterior",
            "options": [
                {
                    "id": "200020342",
                    "name": "Woodland Green (Fleet)",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020333",
                    "name": "Silver Birch Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020332",
                    "name": "Summit White",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020335",
                    "name": "Victory Red",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020330",
                    "name": "Black",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020334",
                    "name": "Deep Ruby Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020327",
                    "name": "Imperial Blue Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020324",
                    "name": "Graystone Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020323",
                    "name": "Dark Cherry Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020345",
                    "name": "Tangier Orange (Fleet)",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020336",
                    "name": "Black Granite Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020344",
                    "name": "Wheatland Yellow (Fleet)",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020331",
                    "name": "Blue Granite  Metallic",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                },
                {
                    "id": "200020343",
                    "name": "Doeskin Tan (Fleet)",
                    "equipmentType": "COLOR",
                    "availability": "USED"
                }
            ]
        }
    ],
    "categories": {
        "primaryBodyType": "Truck",
        "market": "Flex Fuel",
        "epaClass": "Standard Pickup Trucks",
        "vehicleSize": "Large",
        "vehicleType": "Truck",
        "vehicleStyle": "Extended Cab Pickup"
    },
    "squishVin": "1GCEC29J9Z",
    "years": [
        {
            "id": 100526050,
            "year": 2009,
            "styles": [
                {
                    "id": 101060059,
                    "name": "LT 4dr Extended Cab 6.5 ft. SB (4.8L 8cyl 4A)",
                    "submodel": {
                        "body": "Extended Cab",
                        "modelName": "Silverado 1500 Extended Cab",
                        "niceName": "extended-cab"
                    },
                    "trim": "LT"
                },
                {
                    "id": 101060060,
                    "name": "LT 4dr Extended Cab 8 ft. LB (5.3L 8cyl 4A)",
                    "submodel": {
                        "body": "Extended Cab",
                        "modelName": "Silverado 1500 Extended Cab",
                        "niceName": "extended-cab"
                    },
                    "trim": "LT"
                },
                {
                    "id": 101060058,
                    "name": "LT 4dr Extended Cab 5.8 ft. SB (4.8L 8cyl 4A)",
                    "submodel": {
                        "body": "Extended Cab",
                        "modelName": "Silverado 1500 Extended Cab",
                        "niceName": "extended-cab"
                    },
                    "trim": "LT"
                }
            ]
        }
    ],
    "matchingType": "SQUISHVIN",
    "mpg": {
        "city": "14"
    }
}
 */
import { z } from 'zod';

export const vinVehicleDataSchema = z.object({
    vin: z.string().optional(),
    make: z.object({
        id: z.number().optional(),
        name: z.string().optional(),
        niceName: z.string().optional(),
    }).optional(),
    model: z.object({
        id: z.string().optional(),
        name: z.string().optional(),
        niceName: z.string().optional(),
    }).optional(),
    engine: z.object({
        id: z.string().optional(),
        name: z.string().optional(),
        equipmentType: z.string().optional(),
        availability: z.string().optional(),
        compressionRatio: z.number().optional(),
        cylinder: z.number().optional(),
        size: z.number().optional(),
        displacement: z.number().optional(),
        configuration: z.string().optional(),
        fuelType: z.string().optional(),
        horsepower: z.number().optional(),
        torque: z.number().optional(),
        totalValves: z.number().optional(),
        type: z.string().optional(),
        code: z.string().optional(),
        compressorType: z.string().optional(),
        rpm: z.object({
            horsepower: z.number().optional(),
            torque: z.number().optional(),
        }).optional(),
        valve: z.object({
            timing: z.string().optional(),
            gear: z.string().optional(),
        }).optional(),
    }).optional(),
    transmission: z.object({
        id: z.string().optional(),
        name: z.string().optional(),
        equipmentType: z.string().optional(),
        availability: z.string().optional(),
        automaticType: z.string().optional(),
        transmissionType: z.string().optional(),
        numberOfSpeeds: z.string().optional(),
    }).optional(),
    drivenWheels: z.string().optional(),
    numOfDoors: z.string().optional(),
    options: z.array(
        z.object({
            category: z.string().optional(),
            options: z.array(
                z.object({
                    id: z.string().optional(),
                    name: z.string().optional(),
                    equipmentType: z.string().optional(),
                    availability: z.string().optional(),
                    description: z.string().optional(),
                })
            ).optional(),
        })
    ).optional(),
    colors: z.array(
        z.object({
            category: z.string().optional(),
            options: z.array(
                z.object({
                    id: z.string().optional(),
                    name: z.string().optional(),
                    equipmentType: z.string().optional(),
                    availability: z.string().optional(),
                })
            ).optional(),
        })
    ).optional(),
    price: z.object({
        baseMsrp: z.number().optional(),
        deliveryCharges: z.number().optional(),
        estimateTmv: z.boolean().optional(),
    }).optional(),
    categories: z.object({
        primaryBodyType: z.string().optional(),
        market: z.string().optional(),
        crossover: z.string().optional(),
        epaClass: z.string().optional(),
        vehicleSize: z.string().optional(),
        vehicleType: z.string().optional(),
        vehicleStyle: z.string().optional(),
    }).optional(),
    squishVin: z.string().optional(),
    years: z.array(
        z.object({
            id: z.number().optional(),
            year: z.number().optional(),
            styles: z.array(
                z.object({
                    id: z.number().optional(),
                    name: z.string().optional(),
                    submodel: z.object({
                        body: z.string().optional(),
                        modelName: z.string().optional(),
                        niceName: z.string().optional(),
                    }).optional(),
                    trim: z.string().optional(),
                })
            ).optional(),
        })
    ).optional(),
    matchingType: z.string().optional(),
    mpg: z.object({
        highway: z.string().optional(),
        city: z.string().optional(),
    }).optional(),
});

export type VinVehicleData = z.infer<typeof vinVehicleDataSchema>;

export function parseVehicleData(jsonData: unknown): VinVehicleData {
  return vinVehicleDataSchema.parse(jsonData);
}

export function getVehicleName(vehicleData: VinVehicleData): string {
  // 2009 Chevrolet Silverado 1500 XFE
  return `${vehicleData.years?.[0]?.year ?? ''} ${vehicleData.make?.name ?? ''} ${vehicleData.model?.name ?? ''}`;
}

export function getColorOptions(
  vehicleData: VinVehicleData,
  category: 'Interior' | 'Exterior'
) {
  const colorCategory = vehicleData.colors?.find(
    (c) => c.category === category
  );
  return colorCategory ? colorCategory.options.map((o) => o.name) : [];
}

export function generateNotes(vehicleData: VinVehicleData): string {
  let notes = '';

  // Add engine details
  if (vehicleData.engine) {
    notes += 'Engine:\n';
    Object.entries(vehicleData.engine).forEach(([key, value]) => {
      if (
        value !== undefined &&
        key !== 'type' &&
        key !== 'horsepower' &&
        key !== 'torque'
      ) {
        notes += `${key}: ${value}\n`;
      }
    });
  }

  // Add transmission details
  if (vehicleData.transmission) {
    notes += '\nTransmission:\n';
    Object.entries(vehicleData.transmission).forEach(([key, value]) => {
      if (key !== 'transmissionType' && key !== 'numberOfSpeeds') {
        notes += `${key}: ${value}\n`;
      }
    });
  }

  // Add options
  if (vehicleData.options) {
    notes += '\nOptions:\n';
    vehicleData.options.forEach((category) => {
      notes += `${category.category}:\n`;
      category.options.forEach((option) => {
        notes += `- ${option.name}`;
        if (option.description) {
          notes += `: ${option.description}`;
        }
        notes += '\n';
      });
    });
  }

  // Add any other top-level fields
  const excludedFields = [
    'make',
    'model',
    'engine',
    'transmission',
    'drivenWheels',
    'colors',
    'price',
    'mpg',
    'options',
  ];
  Object.entries(vehicleData).forEach(([key, value]) => {
    if (!excludedFields.includes(key)) {
      notes += `\n${key}:\n${JSON.stringify(value, null, 2)}\n`;
    }
  });

  return notes;
}
